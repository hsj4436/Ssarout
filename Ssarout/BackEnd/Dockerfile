FROM openjdk:8-jdk
ENV JAVA_OPTS "-XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap -XX:MaxRAMFraction=1 -XshowSettings:vm"
EXPOSE 8080
ARG DB_PASSWORD
ARG DB_URL
ARG GOOGLE_CLIENT_ID
ARG GOOGLE_CLIENT_SECRET
ARG JWT_SECRET
ARG KAKAO_CLIENT_ID
ARG KAKAO_CLIENT_SECRET
ARG TOKEN_SECRET
ARG S3_ACCESS_KEY
ARG S3_SECRET_KEY
ARG KAKAO_API_ADMIN_KEY
ARG JAR_FILE=build/libs/ssaout-0.0.1-SNAPSHOT.jar

ENV DB_PASSWORD=$DB_PASSWORD
ENV DB_URL=$DB_URL
ENV GOOGLE_CLIENT_ID_KEY=$GOOGLE_CLIENT_ID
ENV GOOGLE_CLIENT_SECRET_KEY=$GOOGLE_CLIENT_SECRET
ENV JWT_SECRET_KEY=$JWT_SECRET
ENV KAKAO_CLIENT_ID_KEY=$KAKAO_CLIENT_ID
ENV KAKAO_CLIENT_SECRET_KEY=$KAKAO_CLIENT_SECRET
ENV AUTHENTICATION_TOKEN_SECRET=$TOKEN_SECRET
ENV S3_ACCESS_KEY=$S3_ACCESS_KEY
ENV S3_SECRET_KEY=$S3_SECRET_KEY
ENV KAKAO_API_ADMIN_KEY=$KAKAO_API_ADMIN_KEY

COPY ${JAR_FILE} ssaout.jar
ENTRYPOINT ["java","-jar","/ssaout.jar","&"]